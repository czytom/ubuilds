diff -Nur k5n-all-src-0.4.6/build.xml k5n-all-src-0.4.6_patched/build.xml
--- k5n-all-src-0.4.6/build.xml	2008-01-26 22:41:42.000000000 +0200
+++ k5n-all-src-0.4.6_patched/build.xml	2008-10-26 05:49:27.000000000 +0200
@@ -32,6 +32,7 @@
   <property name="google-rrule-jar"  value="lib/google-rfc2445.jar"/>
   <property name="javacsv-jar"  value="lib/javacsv.jar"/>
   <property name="commons-code-jar"  value="lib/commons-codec-1.3.jar"/>
+  <property name="junit-jar"  value="lib/junit.jar"/>
 
   <target name="init">
     <!-- Create the time stamp -->
@@ -41,7 +42,7 @@
   </target>
 
   <target name="compile"
-    depends="init,compile-ical,compile-calendarpanel,compile-k5njournal"
+    depends="init,compile-ical,compile-calendarpanel"
     description="compile the source"/>
 
   <target name="compile-ical" depends="init">
@@ -76,13 +77,9 @@
     <!-- Create the distribution directory -->
     <mkdir dir="${dist}/lib"/>
 
-    <!-- Put everything in ${build} into the k5n-ical-${version}.jar file -->
+    <!-- Build jar for ical -->
     <jar jarfile="${dist}/lib/k5n-ical-${version}.jar" basedir="${build}"
       excludes="**/journal/*.class,**/ui/calendar/*.class">
-      <zipfileset src="${jodatime-jar}" />
-      <zipfileset src="${google-rrule-jar}" />
-      <zipfileset src="${javacsv-jar}" />
-      <zipfileset src="${commons-code-jar}" />
     </jar>
 
     <!-- Build jar for calendarpanel -->
@@ -92,20 +89,6 @@
         <attribute name="Main-Class" value="us.k5n.ui.calendar.CalendarPanelTest"/>
       </manifest>
     </jar>
-
-    <!-- Put all the lib and k5njournal files into a single jar
-         and designate the main class -->
-    <jar jarfile="${dist}/k5n-journal-${version}.jar" basedir="${build}"
-      includes="**/journal/*.class">
-    <manifest>
-       <attribute name="Main-Class" value="us.k5n.journal.Main"/>
-    </manifest>
-    <zipfileset src="${dist}/lib/k5n-ical-${version}.jar" />
-    <zipfileset src="${jodatime-jar}" />
-    <zipfileset src="${google-rrule-jar}" />
-    <zipfileset src="${javacsv-jar}" />
-    <zipfileset src="${commons-code-jar}"/>
-    </jar>
   </target>
 
   <target name="javadoc">
@@ -113,6 +96,12 @@
     <javadoc packagenames="us.k5n.ical.*"
       sourcepath="src" destdir="${doc}/ical/api"
       windowtitle="k5n ical API">
+      <classpath>
+        <pathelement path="${jodatime-jar}"/>
+        <pathelement path="${google-rrule-jar}"/>
+        <pathelement path="${javacsv-jar}"/>
+      	<pathelement path="${commons-code-jar}"/>
+      </classpath>
     </javadoc>
     <zip destfile="${dist}/doc/k5n-ical-doc-${version}.zip">
       <zipfileset dir="${doc}/ical" prefix="k5n-ical-doc-${version}" />
@@ -165,6 +154,11 @@
     <javac srcdir="${test}" destdir="${testbuild}">
       <classpath>
         <pathelement path="${dist}/lib/k5n-ical-${version}.jar" />
+        <pathelement path="${jodatime-jar}"/>
+        <pathelement path="${google-rrule-jar}"/>
+        <pathelement path="${javacsv-jar}"/>
+        <pathelement path="${commons-code-jar}"/>
+        <pathelement path="${junit-jar}"/>
       </classpath>
     </javac>
   </target>
@@ -177,6 +171,11 @@
         <pathelement location="${testbuild}" />
         <pathelement location="${testbuild}/data" />
         <pathelement path="${dist}/lib/k5n-ical-${version}.jar" />
+        <pathelement path="${jodatime-jar}"/>
+        <pathelement path="${google-rrule-jar}"/>
+        <pathelement path="${javacsv-jar}"/>
+        <pathelement path="${commons-code-jar}"/>
+        <pathelement path="${junit-jar}"/>
       </classpath>
       <batchtest>
         <fileset dir='${testbuild}' includes='**/*Test.class'/>
