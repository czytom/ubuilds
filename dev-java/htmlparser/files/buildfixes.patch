--- build.xml	2007-12-02 08:10:06.000000000 +0200
+++ build.xml.patched	2007-12-02 08:53:30.000000000 +0200
@@ -103,8 +103,10 @@
   <property name="versionType" value="Integration Build"/>
   <property name="versionNumber" value="${versionMajor}.${versionMinor}"/>
   <property name="versionQualifier" value="${versionMajor}_${versionMinor}"/>
-  <property name="src" value="src"/>
-  <property name="classes" value="${src}"/>
+  <property name="src" value="src"/>
+  <property name="src_test" value="src_test"/>
+  <property name="classes" value="${src}"/>
+  <property name="classes_test" value="${src_test}"/>
   <property name="docs" value="docs"/>
   <property name="bin" value="bin"/>
   <property name="lib" value="lib"/>
@@ -367,7 +369,7 @@
   </target>
 
   <!-- Create the Thumbelina jar -->
-  <target name="thumbelina" depends="JDK_OK,jarlexer" description="create thumbelina.jar" if="JDK1.5">
+  <target name="thumbelina" depends="jarlexer" description="create thumbelina.jar">
     <!-- Create the lib directory -->
     <mkdir dir="${lib}"/>
     <mkdir dir="${classes}"/>
@@ -386,7 +388,7 @@
   </target>
   
   <!-- Create the FilterBuilder jar -->
-  <target name="filterbuilder" depends="JDK_OK,jarparser" description="create filterbuilder.jar" if="JDK1.4">
+  <target name="filterbuilder" depends="jarparser" description="create filterbuilder.jar">
     <!-- Create the lib directory -->
     <mkdir dir="${lib}"/>
     <mkdir dir="${classes}"/>
@@ -412,9 +414,9 @@
   </target>
   
   <!-- Run the unit tests -->
-  <target name="test" depends="jar" description="run the JUnit tests">
+  <target name="test" description="run the JUnit tests">
     <mkdir dir="${classes}"/>
-    <javac srcdir="${src}" destdir="${classes}" includes="org/htmlparser/tests/**" debug="on" source="1.3">
+    <javac srcdir="${src_test}" destdir="${classes_test}" includes="org/htmlparser/tests/**" debug="on" source="1.3">
       <classpath>
         <pathelement location="${classes}"/>
         <pathelement location="${junit.jar}"/>
@@ -425,7 +427,8 @@
     <java classname="org.htmlparser.tests.AllTests" fork="yes" failonerror="yes">
       <classpath>
         <pathelement location="${lib}/htmlparser.jar"/>
-        <pathelement location="${classes}"/>
+        <pathelement location="${classes}"/>
+        <pathelement location="${classes_test}"/>
         <pathelement location="${junit.jar}"/>
         <pathelement location="${sax2.jar}"/>
         <pathelement location="${java.home}/../lib/tools.jar"/>
@@ -435,9 +438,9 @@
   </target>
 
   <!-- Create the javadoc for the project -->
-  <target name="javadoc" depends="JDK_OK,JDK_Warning,init" description="create JavaDoc (API) documentation">
+  <target name="javadoc" depends="init" description="create JavaDoc (API) documentation">
     <mkdir dir="${classes}"/>
-    <javac srcdir="${resources}" includes="HtmlTaglet.java" classpath="${classes}"/>
+    <javac srcdir="${resources}" includes="HtmlTaglet.java" classpath="${classes}:tools.jar"/>
     <mkdir dir="${docs}/javadoc"/>
     <property name="javadoc.doctitle" value="HTML Parser ${versionNumber}"/>
     <property name="javadoc.header" value="&lt;A HREF=&quot;http://htmlparser.sourceforge.net&quot; target=&quot;_top&quot;>HTML Parser Home Page&lt;/A>"/>
